\ProvidesPackage{beamerthemeegi}
% Adapted from EGEE3 theme
% by David O'Callaghan <david.ocallaghan@cs.tcd.ie>, 2011
\usepackage{helvet}
\usepackage{verbatim}
\usepackage{fancyvrb,fancybox,calc}
\usepackage{upquote}
\usepackage{listings}
\mode<presentation>

\newdimen\head@height
\head@height=42pt

\definecolor{egiblue}{RGB}{0,103,177}
\definecolor{egiorange}{RGB}{200,113,0}
\definecolor{egiblack}{RGB}{0,0,0}
\definecolor{egigrey30}{RGB}{76,76,76}
\definecolor{egigrey50}{RGB}{128,128,128}
\definecolor{egigrey60}{RGB}{153,153,153}
\definecolor{egigrey70}{RGB}{179,179,179}
\definecolor{opennebulablue}{RGB}{0,145,197}
\definecolor{rubyred}{RGB}{204,52,45}
\definecolor{emiblue}{cmyk}{.98,.68,.35,.23}
\definecolor{emired}{cmyk}{.19,1,1,.12}
\definecolor{emigrey}{cmyk}{0,0,0,.2}
\definecolor{emiyellow}{cmyk}{.0,.25,1.00,.0}
\definecolor{egiblue}{RGB}{0,103,177}
\definecolor{activemqviolet}{cmyk}{.0,1.0,.50,.60}
\setbeamercolor{section in head}{fg=white,bg=egiblue}
\setbeamercolor{egi in head}{fg=white,bg=egiblue}
\setbeamercolor{date in foot}{fg=white,bg=egiblue}
\setbeamercolor{blackbox}{fg=white,bg=black}

\setbeamertemplate{navigation symbols}{}

\newdimen\heightL
\heightL=\head@height
\advance\heightL-1pt
\newbox\logobox
\setbox\logobox\hbox{\raise0.3pt\hbox{\includegraphics[height=\head@height]{EGI_Logo.png}}%
\hskip-1pt\includegraphics[height=\head@height]{CurveOnWhite.png}}

\defbeamertemplate*{headline}{egi theme}{\hrule height0pt depth0pt}

\defbeamertemplate*{frametitle}{egi theme}
{
    \nointerlineskip
        \baselineskip=0pt
        \lineskip=0pt
        \parsep=0pt
        \begin{beamercolorbox}[wd=\paperwidth,ht=\head@height,dp=3pt]{section in head}
        \copy\logobox
        \raise10pt\vbox{\strut{%
            \insertframetitle\\
            \scriptsize{\insertframesubtitle\strut}}}
        \end{beamercolorbox}
}

\defbeamertemplate*{footline}{egi theme}
{
    \leavevmode
    \begin{beamercolorbox}[wd=\paperwidth,ht=6ex,dp=1ex]{date in foot}
      \ \ \tiny\insertdate\hfill\insertframenumber\ \
\vskip1ex
      \ \ EGI-InSPIRE RI-261323\hfill\ www.egi.eu\ \
    \end{beamercolorbox}
}

\setbeamercolor{normal text}{fg=egiblack}

\setbeamercolor{alerted text}{fg=egiorange!90!black}
\setbeamerfont{alerted text}{series=\bfseries}

\setbeamertemplate{itemize item}{{\color{egiorange}$\bullet$}}
\setbeamertemplate{itemize subitem}{{\color{egiorange}$\bullet$}}
\setbeamertemplate{itemize subsubitem}{{\color{egiorange}$\bullet$}}

\setbeamertemplate{title page}{
    \lineskip=0pt
    % Header
    \begin{beamercolorbox}[wd=\paperwidth,ht=\head@height,dp=4pt]{section in head}
    \copy\logobox
            \hfill\raise4pt\hbox{\textbf{\LARGE EGI-InSPIRE\ }}
    \end{beamercolorbox}
    % Sidebar
    \vbox to \head@height{
        \hskip-30pt \hbox{\includegraphics[width=60pt]{Sidebar.jpg}}
        \vss
    }%
    % Title Text
    \hskip60pt\vbox to 120pt{
        \advance\hsize-60pt
        \begin{center}
            {\Large\inserttitle}
            \bigskip

            {\large\insertauthor}
        \end{center}
        \vfill
    }

    % Logos
    %\advance\hsize\beamer@rightmargin
    \vfill
    \vskip3ex
    %\hskip-\beamer@leftmargin
    %\hbox to 6ex{\hfil}
    \hfill \hbox{
%        \includegraphics[width=30pt]{FP7.png}
%    \
        \includegraphics[width=60pt]{e-infrastructure.png}
    \
        \includegraphics[width=36pt]{EU.png}
    }
}

\newcommand{\opennebul}[1]{Open\textcolor{opennebulablue}{Nebul#1}}
\newcommand{\rocci}{\textcolor{rubyred}{r}\textcolor{opennebulablue}{OCCI}}

\newcommand\Fontsmaller{\fontsize{8}{9.2}\selectfont}
\newcommand\Fonttiny{\fontsize{7}{8.2}\selectfont}

\newenvironment{terminalbox}[1]
  {
    \ifx&#1&%
      \Fontsmaller
    \else
      #1
    \fi
    \VerbatimEnvironment
    \begin{beamercolorbox}{blackbox}
    \hfill\begin{minipage}{\linewidth-6pt}
    \vskip 3pt
    \begin{Verbatim}
  }
  {
    \end{Verbatim}
    \end{minipage}\hfill\null
    \vskip \baselineskip
    \end{beamercolorbox}
  }

\lstset{basicstyle=\footnotesize\ttfamily,
  numberstyle=\footnotesize\ttfamily,
  breaklines=true,
  breakatwhitespace=true,
  frame=single,
  numbers=left}

